
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="apple-touch-icon" href="icons/apple-icon.png">

  <link rel="manifest" href="manifest.webmanifest" />
  <title>Glue Mass Calculator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <h1>Υπολογιστής κόλλας<button type="button" onclick="update_files(event)">*</button></h1>

  <div id="inputFields">
    
    <label for="input-p1">Ταχύτητα</label><input id="input-p1" value="25" /><span>m/min</span>
    <label for="input-p2">Μήκος πάνελ</label><input id="input-p2" value="600" /><span>mm</span>
    <label for="input-p3">Πάχος πάνελ</label><input id="input-p3" value="19"/><span>mm</span>
    <label for="input-p4">Μήκος διάκενου</label><input id="input-p4" value="400" /><span>mm</span>
    <label for="input-h1">Ρυθμός τήξης</label><input id="input-h1" value="4" /><span>Kg/h</span>
    <label for="input-h2">Επιφ. πυκ. κόλλας</label><input id="input-h2" value="140" />
      <a href="#" onclick="show_datalist_selector('input-h2', 'surface_density')">?</a>
    <span>gr/m<sup>2</sup></span>
    <label class="hid" for="input-h3">h3</label><input id="input-h3" placeholder="0" /><span>XXX</span>
    <datalist id="surface_density">
    </datalist>
    <dialog id="datalist_selector">
      <select>
        
      </select>
      <br>
      <button onclick="accept_select()">OK</button>
      <button onclick="closeSelector()">Άκυρο</button>
      <input type="hidden" name="ctl">
    </dialog>
  </div>

  <button id="runCalc">=</button>

  <h3>Αποτέλεσμα:</h3>
  <div>
  Ρυθμός κόλλας: <span id="resultOutput">--</span><span>&nbsp;gr/h</span>
  <br/>
  Τρέχοντα: <span id="resultArea">--</span><span>&nbsp;m/h</span>

  <script type="module" src="app.js"></script>
  <script>
    function update_files(event){
      if (navigator.serviceWorker.controller) {
        alert('Έλεγχος για νεώτερες εκδόσεις');
        navigator.serviceWorker.controller.postMessage({ type: 'UPDATE_CACHE' });
        //alert('Update check triggered. Reload page if new content is available.');
      }
    }
    function closeSelector(){
      document.getElementById('datalist_selector').close();
    }
    function show_datalist_selector(ctl, datalist){
      const selector = document.getElementById('datalist_selector');
      var select = selector.firstElementChild;
      select.innerHTML = document.getElementById(datalist).innerHTML;
      selector.lastElementChild.value = ctl;
      selector.showModal();
    }
    function accept_select(){
      const selector = document.getElementById('datalist_selector');
      const select = selector.firstElementChild;
      var ctl = document.getElementById(selector.lastElementChild.value);
      ctl.value = select.value;
      selector.close();
    }
  </script>
</body>
</html>
